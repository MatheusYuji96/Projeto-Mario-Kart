create database Mario_Kart;
use Mario_Kart;

create table Usuarios (
idUsuario int primary key auto_increment,
Nome varchar(100) not null unique,
CPF char(11) unique,
Email varchar(100) not null,
DataNasc date,
Senha varchar(45) not null,
ceTitulos int,
foreign key (ceTitulos)
references Titulos(idTitulos));

create table Titulos(
idTitulos int primary key,
NomeJogo varchar(60) not null unique,
DataLanc date,
Console varchar(45) not null,
Mecanica varchar(100),
Online tinyint);

insert into Titulos values
(1, 'Super Mario Kart', '1992-08-27', 'Super Nintendo Entertainment System', 'Corridas de Kart', 0),
(2, 'Mario Kart 64', '1996-12-14', 'Nintendo 64', 'Circuitos 3D', 0),
(3, 'Mario Kart: Super Circuit', '2001-07-21', 'Game Boy Advance', 'Corridas em Console Portátil', 0),
(4, 'Mario Kart: Double Dash!!', '2003-11-07', 'Nintendo GameCube', 'Corridas em Duplas', 0),
(5, 'Mario Kart DS', '2005-11-14', 'Nintendo DS', 'Circuitos Retrôs', 1),
(6, 'Mario Kart Wii', '2008-04-10', 'Nintendo Wii', 'Motocicletas', 1),
(7, 'Mario Kart 7', '2012-05-21', 'Nintendo 3DS', 'Customização dos Veículos', 1),
(8, 'Mario Kart 8', '2014-05-29', 'Nintendo Wii U', 'Corridas Anti-Gravitacionais', 1),
(9, 'Mario Kart 8 Deluxe', '2017-04-28', 'Nintendo Switch', 'Customização das Opções de Itens para as Corridas', 1),
(10, 'Mario Kart Tour', '2019-09-25', 'Celulares', 'Pistas Baseadas em Cidades Reais', 1),
(11, 'Mario Kart World', '2025-06-05', 'Nintendo Switch 2', 'Mundo Aberto', 1);

create table Copa(
idCopa int primary key,
Nome varchar(20));

insert into Copa values
(1, 'Mushroom Cup'),
(2, 'Flower Cup'),
(3, 'Star Cup'),
(4, 'Special Cup'),
(5, 'Shell Cup'),
(6, 'Banana Cup'),
(7, 'Leaf Cup'),
(8, 'Lightning Cup'),
(9, 'Egg Cup'),
(10, 'Triforce Cup'),
(11, 'Crossing Cup'),
(12, 'Bell Cup'),
(13, 'Golden Dash Cup'),
(14, 'Lucky Cat Cup'),
(15, 'Turnip Cup'),
(16, 'Propeller Cup'),
(17, 'Rock Cup'),
(18, 'Moon Cup'),
(19, 'Fruit Cup'),
(20, 'Boomerang Cup'),
(21, 'Feather Cup'),
(22, 'Cherry Cup'),
(23, 'Acorn Cup'),
(24, 'Spiny Cup'),
(25, 'Outros');

create table Pistas(
ceTitulos int,
ceCopa int,
idPistas int,
Nome varchar(60) not null,
Tematica varchar (45),
Formato varchar(15),
constraint chkFormato
check (Formato in ('Seções', 'Voltas')),
primary key (ceTitulos, ceCopa, idPistas),
foreign key (ceTitulos) references Titulos(idTitulos),
foreign key (ceCopa) references Copa(idCopa));

insert into Pistas values
(1, 1, 1, 'Mario Circuit 1', 'Circuito', 'Voltas'),
(1, 1, 2, 'Donut Plains 1', null, 'Voltas'),
(1, 1, 3, 'Ghost Valley 1', 'Assombrada', 'Voltas'),
(1, 1, 4, 'Bowser Castle 1', 'Fogo', 'Voltas'),
(1, 1, 5, 'Mario Circuit 2', 'Circuito', 'Voltas'),
(1, 2, 1, 'Choco Island 1', null, 'Voltas'),
(1, 2, 2, 'Ghost Valley 2', 'Assombrada', 'Voltas'),
(1, 2, 3, 'Donut Plains 2', null, 'Voltas'),
(1, 2, 4, 'Bowser Castle 2', 'Fogo', 'Voltas'),
(1, 2, 5, 'Mario Circuit 3', 'Circuito', 'Voltas'),
(1, 3, 1, 'Koopa Beach 1', 'Praia', 'Voltas'),
(1, 3, 2, 'Choco Island 2', null, 'Voltas'),
(1, 3, 3, 'Vanilla Lake 1', 'Neve', 'Voltas'),
(1, 3, 4, 'Bowser Castle 3', 'Fogo', 'Voltas'),
(1, 3, 5, 'Mario Circuit 4', 'Circuito', 'Voltas'),
(1, 4, 1, 'Donut Plains 3', null, 'Voltas'),
(1, 4, 2, 'Koopa Beach 2', 'Praia', 'Voltas'),
(1, 4, 3, 'Ghost Valley 3', 'Assombrada', 'Voltas'),
(1, 4, 4, 'Vanilla Lake 2', 'Neve', 'Voltas'),
(1, 4, 5, 'Rainbow Road', 'Espacial', 'Voltas'),
(2, 1, 1, 'Luigi Raceway', 'Circuito', 'Voltas'),
(2, 1, 2, 'Moo Moo Farm', 'Fazenda', 'Voltas'),
(2, 1, 3, 'Koopa Troopa Beach', 'Praia', 'Voltas'),
(2, 1, 4, 'Kalimari Desert', 'Deserto', 'Voltas'),
(2, 2, 1, "Toad's Turnpike", null, 'Voltas'),
(2, 2, 2, 'Frappe Snowland', 'Neve', 'Voltas'),
(2, 2, 3, 'Choco Mountain', null, 'Voltas'),
(2, 2, 4, 'Mario Raceway', 'Circuito', 'Voltas'),
(2, 3, 1, 'Wario Stadium', 'Estádio', 'Voltas'),
(2, 3, 2, 'Sherbet Land', 'Gelo', 'Voltas'),
(2, 3, 3, 'Royal Raceway', 'Circuito', 'Voltas'),
(2, 3, 4, "Bowser's Castle", 'Fogo', 'Voltas'),
(2, 4, 1, "DK's Jungle Parkway", 'Selva', 'Voltas'),
(2, 4, 2, 'Yoshi Valley', null, 'Voltas'),
(2, 4, 3, 'Banshee Boardwalk', 'Assombrada', 'Voltas'),
(2, 4, 4, 'Rainbow Road', 'Espacial', 'Voltas'),
(3, 1, 1, 'Peach Circuit', 'Circuito', 'Voltas'),
(3, 1, 2, 'Shy Guy Beach', 'Praia', 'Voltas'),
(3, 1, 3, 'Riverside Park', 'Selva', 'Voltas'),
(3, 1, 4, 'Bowser Castle 1', 'Fogo', 'Voltas'),
(3, 2, 1, 'Mario Circuit', 'Circuito', 'Voltas'),
(3, 2, 2, 'Boo Lake', 'Assombrada', 'Voltas'),
(3, 2, 3, 'Cheese Land', null, 'Voltas'),
(3, 2, 4, 'Bowser Castle 2', 'Fogo', 'Voltas'),
(3, 8, 1, 'Luigi Circuit', 'Circuito', 'Voltas'),
(3, 8, 2, 'Sky Garden', null, 'Voltas'),
(3, 8, 3, 'Cheep Cheep Island', 'Praia', 'Voltas'),
(3, 8, 4,'Sunset Wilds', 'Deserto', 'Voltas'),
(3, 3, 1, 'Snow Land', 'Neve', 'Voltas'),
(3, 3, 2, 'Ribbon Road', null, 'Voltas'),
(3, 3, 3, 'Yoshi Desert', 'Deserto', 'Voltas'),
(3, 3, 4, 'Bowser Castle 3', 'Fogo', 'Voltas'),
(3, 4, 1, 'Lakeside Park', null, 'Voltas'),
(3, 4, 2, 'Broken Pier', 'Assombrada', 'Voltas'),
(3, 4, 3, 'Bowser Castle 4', 'Fogo', 'Voltas'),
(3, 4, 4, 'Rainbow Road', 'Espacial', 'Voltas'),
(4, 1, 1, 'Luigi Circuit', 'Circuito', 'Voltas'),
(4, 1, 2, 'Peach Beach', 'Praia', 'Voltas'),
(4, 1, 3, 'Baby Park', null, 'Voltas'),
(4, 1, 4, 'Dry Dry Desert', 'Deserto', 'Voltas'),
(4, 2, 1, 'Mushroom Bridge', null, 'Voltas'),
(4, 2, 2, 'Mario Circuit', 'Circuito', 'Voltas'),
(4, 2, 3, 'Daisy Cruiser', null, 'Voltas'),
(4, 2, 4, 'Waluigi Stadium', 'Estádio', 'Voltas'),
(4, 3, 1, 'Sherbet Land', 'Neve', 'Voltas'),
(4, 3, 2, 'Mushroom City', 'Cidade', 'Voltas'),
(4, 3, 3, 'Yoshi Circuit', 'Circuit', 'Voltas'),
(4, 3, 4, 'DK Mountain', 'Selva', 'Voltas'),
(4, 4, 1, 'Wario Colosseum', null, 'Voltas'),
(4, 4, 2, 'Dino Dino Jungle', 'Selva', 'Voltas'),
(4, 4, 3, "Bowser's Castle", 'Fogo', 'Voltas'),
(4, 4, 4, 'Rainbow Road', 'Espacial', 'Voltas'),
(5, 1, 1, 'Figure-8 Circuit', 'Circuito', 'Voltas'),
(5, 1, 2, 'Yoshi Falls', null, 'Voltas'),
(5, 1, 3, 'Cheep Cheep Beach', 'Praia', 'Voltas'),
(5, 1, 4, "Luigi's Mansion", 'Assombrada', 'Voltas'),
(5, 2, 1, 'Desert Hills', 'Deserto', 'Voltas'),
(5, 2, 2, 'Delfino Square', null, 'Voltas'),
(5, 2, 3, 'Waluigi Pinball', null, 'Voltas'),
(5, 2, 4, 'Shroom Ridge', null, 'Voltas'),
(5, 3, 1, 'Tick-Tock Clock', null, 'Voltas'),
(5, 3, 2, 'DK Pass', 'Neve', 'Voltas'),
(5, 3, 3, 'Mario Circuit', 'Circuito', 'Voltas'),
(5, 3, 4, 'Airship Fortress', null, 'Voltas'),
(5, 4, 1, 'Wario Stadium', 'Estádio', 'Voltas'),
(5, 4, 2, 'Peach Gardens', null, 'Voltas'),
(5, 4, 3, 'Bowser Castle', 'Fogo', 'Voltas'),
(5, 4, 4, 'Rainbow Road', 'Espacial', 'Voltas'),
(6, 1, 1, 'Luigi Circuit', 'Circuito', 'Voltas'),
(6, 1, 2, 'Moo Moo Meadows', 'Fazenda', 'Voltas'),
(6, 1, 3, 'Mushroom Gorge', null, 'Voltas'),
(6, 1, 4, "Toad's Factory", null, 'Voltas'),
(6, 2, 1, 'Mario Circuit', 'Circuito', 'Voltas'),
(6, 2, 2, 'Coconut Mall', null, 'Voltas'),
(6, 2, 3, 'DK Summit', 'Neve', 'Voltas'),
(6, 2, 4, "Wario's Gold Mine", null, 'Voltas'),
(6, 3, 1, 'Daisy Circuit', 'Cidade', 'Voltas'),
(6, 3, 2, 'Koopa Cape', null, 'Voltas'),
(6, 3, 3, 'Maple Treeway', null, 'Voltas'),
(6, 3, 4, 'Grumble Volcano', 'Fogo', 'Voltas'),
(6, 4, 1, 'Dry Dry Ruins', 'Deserto', 'Voltas'),
(6, 4, 2, 'Moonview Highway', 'Cidade', 'Voltas'),
(6, 4, 3, "Bowser's Castle", 'Fogo', 'Voltas'),
(6, 4, 4, 'Rainbow Road', 'Espacial', 'Voltas'),
(7, 1, 1, 'Toad Circuit', 'Circuito', 'Voltas'),
(7, 1, 2, 'Daisy Hills', null, 'Voltas'),
(7, 1, 3, 'Cheep Cheep Lagoon', null, 'Voltas'),
(7, 1, 4, 'Shy Guy Bazaar', 'Cidade', 'Voltas'),
(7, 2, 1, 'Wuhu Loop', null, 'Seções'),
(7, 2, 2, 'Mario Circuit', 'Circuito', 'Voltas'),
(7, 2, 3, 'Musc Park', null, 'Voltas'),
(7, 2, 4, 'Rock Rock Mountain', null, 'Voltas'),
(7, 3, 1, 'Piranha Plant Slide', null, 'Voltas'),
(7, 3, 2, 'Wario Shipyard', null, 'Voltas'),
(7, 3, 3, 'Neo Bowser City', 'Cidade', 'Voltas'),
(7, 3, 4, 'Maka Wuhu', null, 'Seções'),
(7, 4, 1, 'DK Jungle', 'Selva', 'Voltas'),
(7, 4, 2, "Rosalina's Ice World", 'Neve', 'Voltas'),
(7, 4, 3, "Bowser's Castle", 'Fogo', 'Voltas'),
(7, 4, 4, 'Rainbow Road', 'Espacial', 'Seções'),
(8, 1, 1, 'Mario Kart Stadium', 'Estádio', 'Voltas'),
(8, 1, 2, 'Water Park', null, 'Voltas'),
(8, 1, 3, 'Sweet Sweet Canyon', null, 'Voltas'),
(8, 1, 4, 'Thwomp Ruins', null, 'Voltas'),
(8, 2, 1, 'Mario Circuit', 'Circuito', 'Voltas'),
(8, 2, 2, 'Toad Harbor', 'Cidade', 'Voltas'),
(8, 2, 3, 'Twisted Mansion', 'Assombrada', 'Voltas'),
(8, 2, 4, 'Shy Guy Falls', null, 'Voltas'),
(8, 3, 1, 'Sunshine Airport', null, 'Voltas'),
(8, 3, 2, 'Dolphin Shoals', null, 'Voltas'),
(8, 3, 3, 'Electrodrome', null, 'Voltas'),
(8, 3, 4, 'Mount Wario', 'Neve', 'Seções'),
(8, 4, 1, 'Cloudtop Cruise', null, 'Voltas'),
(8, 4, 2, 'Bone-Dry Dunes', 'Deserto', 'Voltas'),
(8, 4, 3, "Bowser's Castle", 'Fogo', 'Voltas'),
(8, 4, 4, 'Rainbow Road', 'Espacial', 'Voltas'),
(8, 9, 2, 'Excitebike Arena', null, 'Voltas'),
(8, 9, 3, 'Dragon Driftway', null, 'Voltas'),
(8, 9, 4, 'Mute City', 'Cidade', 'Voltas'),
(8, 10, 3, 'Ice Ice Outpost', 'Gelo', 'Voltas'),
(8, 10, 4, 'Hyrule Circuit', null, 'Voltas'),
(8, 11, 3, 'Wild Woods', 'Selva', 'Voltas'),
(8, 11, 4, 'Animal Crossing', null, 'Voltas'),
(8, 12, 3, 'Super Bell Subway', null, 'Voltas'),
(8, 12, 4, 'Big Blue', null, 'Seções'),
(9, 16, 4, 'Sky-High Sundae', null, 'Voltas'),
(9, 19, 4, "Yoshi's Island", null, 'Voltas'),
(10, 25, 1, 'New York Minute', 'Cidade', 'Voltas'),
(10, 25, 2, 'Tokyo Blur', 'Cidade', 'Voltas'),
(10, 25, 3, 'Paris Promenade', 'Cidade', 'Voltas'),
(10, 25, 4, 'London Loop', 'Cidade', 'Voltas'),
(10, 25, 5, 'Vancouver Velocity', 'Cidade', 'Voltas'),
(10, 25, 6, 'Los Angeles Laps', 'Cidade', 'Voltas'),
(10, 25, 7, 'Berlin Byways', 'Cidade', 'Voltas'),
(10, 25, 8, 'Sydney Sprint', 'Cidade', 'Voltas'),
(10, 25, 9, 'Singapore Speedway', 'Cidade', 'Voltas'),
(10, 25, 10, 'Amsterdam Drift', 'Cidade', 'Voltas'),
(10, 25, 11, 'Bangkok Rush', 'Cidade', 'Voltas'),
(10, 25, 12, 'Athens Dash', 'Cidade', 'Voltas'),
(10, 25, 13, 'Rome Avanti', 'Cidade', 'Voltas'),
(10, 25, 14, 'Merry Mountain', 'Neve', 'Voltas'),
(10, 25, 15, 'Ninja Hideaway', null, 'Voltas'),
(10, 25, 16, 'Piranha Plant Cove', null, 'Voltas'),
(10, 25, 17, 'Piranha Plant Pipeline', null, 'Voltas'),
(10, 25, 18, 'RMX Mario Circuit 1', 'Circuito', 'Voltas'),
(10, 25, 19, 'RMX Choco Island 1', null, 'Voltas'),
(10, 25, 20, 'RMX Rainbow Road 1', 'Espacial', 'Voltas'),
(10, 25, 21, 'RMX Rainbow Road 2', 'Espacial', 'Voltas'),
(10, 25, 22, 'RMX Choco Island 2', null, 'Voltas'),
(10, 25, 23, 'RMX Vanilla Lake 1', 'Neve', 'Voltas'),
(10, 25, 24, 'RMX Ghost Valley 1', 'Assombrado', 'Voltas'),
(10, 25, 25, 'RMX Bowser Castle 1', 'Fogo', 'Voltas'),
(10, 25, 26, 'RMX Donut Plains 1', null, 'Voltas'),
(11, 1, 1, 'Mario Bros. Circuit', 'Circuito', 'Voltas'),
(11, 1, 2, 'Crown City', 'Cidade', 'Voltas'),
(11, 1, 3, 'Whistletop Summit', null, 'Voltas'),
(11, 1, 4, 'DK Spaceport', null, 'Voltas'),
(11, 3, 2, 'Starview Peak', 'Neve', 'Voltas'),
(11, 5, 2, 'Faraway Oasis', null, 'Voltas'),
(11, 5, 4, 'Peach Stadium', 'Estádio', 'Voltas'),
(11, 6, 2, 'Salty Salty Speedway', 'Cidade', 'Voltas'),
(11, 6, 4, 'Great ? Block Ruins', null, 'Voltas'),
(11, 7, 1, 'Cheep Cheep Falls', null, 'Voltas'),
(11, 7, 2, 'Dandelion Depths', null, 'Voltas'),
(11, 7, 3, 'Boo Cinema', 'Assombrado', 'Voltas'),
(11, 7, 4, 'Dry Bones Burnout', 'Fogo', 'Voltas'),
(11, 8, 4, "Bowser's Castle", 'Fogo', 'Voltas'),
(11, 4, 1, 'Acorn Heights', null, 'Voltas'),
(11, 4, 3, 'Peach Stadium', 'Estádio', 'Voltas'),
(11, 4, 4, "Rainbow Road", 'Espacial', 'Voltas');

create table ResultadoSimulador(
idResult int auto_increment,
PontFinal1 int,
PontFinal2 int,
VitoriaP1 int,
VitoriaP2 int,
ceUsuario int,
primary key (idResult, ceUsuario),
foreign key (ceUsuario) references Usuarios(idUsuario));

select * from Pistas;
select * from Títulos;
select * from Usuarios;
select * from ResultadoSimulador;

select Nome from Pistas
where Nome like '%d';

select p.nome as Pistas, c.nome as Copa
from Pistas p join Titulos
on p.ceTitulos = idTitulos
join Copa c on p.ceCopa = idCopa
where NomeJogo = 'Mario Kart 64';

select 
concat(u.Nome, ' correu na ', p.nome, ' da ', c.Nome, ' do ', t.NomeJogo) as 'Registro de Corridas'
from Usuarios u join Titulos t on u.ceTitulos = idTitulos
join Pistas p on p.ceTitulos = idTitulos
join Copa c on p.ceCopa = idCopa
where c.Nome = 'Special Cup' and t.NomeJogo = 'Mario Kart 7';